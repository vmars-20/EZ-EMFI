⏺ Excellent! Phase 3 is complete. Let me update the todo list and provide a comprehensive status update:

⏺ 🎉 Migration Progress: Phases 1-3 COMPLETE!

  ✅ Completed Work

  Phase 1: VHDL Core Infrastructure
  - ✅ Renamed shared/volo → shared/custom_inst
  - ✅ Updated MCC_TOP_custom_inst_loader.vhd:
    - Architecture: volo_loader of CustomWrapper → Behavioral of SimpleCustomInstrument
    - App registers: Control6-15 (max 10)
    - BRAM protocol: Control1-5
  - ✅ Updated custom_inst_bram_loader.vhd: Control1-5 protocol
  - ✅ Updated custom_inst_common_pkg.vhd:
    - APP_REG_MIN = 6, APP_REG_MAX = 15
    - Package renamed
  - ✅ Updated VHDL templates:
    - custom_inst_shim_template.vhd
    - custom_inst_main_template.vhd
  - ✅ Verification: No CustomWrapper or entity volo_ references remain

  Phase 2: Python Models
  - ✅ Renamed models/volo → models/custom_inst
  - ✅ Updated custom_inst_app.py:
    - Class: VoloApp → CustomInstApp
    - Max registers: 11 → 10
    - All docstrings and references updated
  - ✅ Updated app_register.py:
    - cr_number validation: 6-15 (was 20-30)
    - Field constraint: ge=6, le=15
  - ✅ Updated __init__.py: Imports and exports updated

  Phase 3: Code Generator
  - ✅ Renamed tools/generate_volo_app.py → tools/generate_custom_inst.py
  - ✅ Updated all imports: models.custom_inst.CustomInstApp
  - ✅ Updated all references: volo_shim → custom_inst_shim, volo_main → custom_inst_main
  - ✅ Updated CLI help and messages

  📋 Remaining Work

  Phase 4: Application Files (DS1140_PD example)
  - Update DS1140_PD_app.yaml: Change cr_number from 20-28 → 6-14
  - Regenerate VHDL files with new tool
  - Migrate existing logic if needed

  Phase 5: Test Infrastructure
  - Create SimpleCustomInstrument_test_stub.vhd (16 control registers)
  - Update tests/conftest.py to use new stub
  - Update test files referencing Control20-30

  Phase 6: Documentation
  - Update CLAUDE.md references
  - Update README.md with new naming

  Phase 7: Final Verification
  - Comprehensive grep for legacy terms
  - Final compilation test
  - Git commit

  📊 Migration Status

  Token Usage: 105K/200K (52% - plenty of room!)
  Progress: 60% complete (3/7 phases done)
  Core Architecture: ✅ FULLY MIGRATED
  Remaining: Application-specific updates and documentation

  Would you like me to continue with Phases 4-7, or would you prefer to review the work so far first?
